<html>

<head>
    <meta charset="utf-8" />
    <script>
        window.onerror = function (e) {
            messager.sendToLocal('error', e);
        };

        document.title = 'DemoApp';

        window.onload = function () {
            var btn = document.getElementById('btn');
            var txt = document.getElementById('txt');
            btn.addEventListener('click', function () {
                messager.sendToLocal('saveToFile', txt.value);
            });
        };

        external.onmessage = function (e) {
            messager.sendToLocal('message', 'got  message from local : ' + e);
        };

        var messager = window.messager = function () { };

        messager.sendToLocal = function (name, param) {
            var msg = {
                name: name,
                param: param
            };
            external.postMessage(JSON.stringify(msg));
        };
    </script>
</head>

<body>
    <div></div>
    This is just for testing!
    <br>
    <input type="text" id="txt" />
    <br>
    <button id="btn">Save</button>
</body>

</html>